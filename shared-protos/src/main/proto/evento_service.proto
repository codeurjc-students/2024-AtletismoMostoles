syntax = "proto3";

import "common.proto";

option java_package = "com.example.service3.grpc";
option java_outer_classname = "EventoServiceGrpcProto";

// Servicio gRPC para la gesti√≥n de eventos y notificaciones en tiempo real.
service EventoService {
  rpc ListarEventos(ListarEventosRequest) returns (ListarEventosResponse);
  rpc CrearEvento(CrearEventoRequest) returns (EventoMessage);
  rpc ObtenerEventoPorId(GetEventoRequest) returns (EventoMessage);
  rpc ActualizarEvento(UpdateEventoRequest) returns (EventoMessage);
  rpc BorrarEvento(BorrarEventoRequest) returns (StatusMessage);
  rpc NotificacionesPendientes(NotificacionesRequest) returns (NotificacionesResponse);
  rpc MarcarEventoVisto(MarcarEventoVistoRequest) returns (StatusMessage);
}

// ========================= PETICIONES =========================

message ListarEventosRequest {}

message GetEventoRequest {
  int64 id = 1;
}

message CrearEventoRequest {
  string name = 1;
  string date = 2;
  string mapLink = 3;
  string imageLink = 4;
  bool organizedByClub = 5;
  repeated int64 disciplineIds = 6;
  string creationTime = 8;
}

message UpdateEventoRequest {
  int64 id = 1;
  string name = 2;
  string date = 3;
  string mapLink = 4;
  string imageLink = 5;
  bool organizedByClub = 6;
  repeated int64 disciplineIds = 7;
  string creationTime = 8;
}

message BorrarEventoRequest {
  int64 eventoId = 1;
}

message MarcarEventoVistoRequest {
  int64 usuarioId = 1;
  int64 eventoId = 2;
}

message NotificacionesRequest {
  int64 usuarioId = 1;
  string timestampUltimaConexion = 2;
}

// ========================= RESPUESTAS =========================

message EventoMessage {
  int64 id = 1;
  string name = 2;
  string date = 3;
  string mapLink = 4;
  string imageLink = 5;
  bool organizedByClub = 6;
  repeated int64 disciplineIds = 7;
  string creationTime = 8;
}

message ListarEventosResponse {
  repeated EventoMessage eventos = 1;
}

message NotificacionData {
  int64 eventoId = 1;
  string name = 2;
  string date = 3;
  string mapLink = 4;
  string imageLink = 5;
  bool organizedByClub = 6;
  string timestampNotificacion = 7;
  repeated int64 disciplineIds = 8;
}

message NotificacionesResponse {
  repeated NotificacionData notificaciones = 1;
}


